{
  "version": 3,
  "file": "QuikVisIFrameOnlyMinimal.js",
  "sourceRoot": "",
  "sources": [
    "QuikVisIFrameOnlyMinimal.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "Template.QuikVisIFrameOnlyMinimal.rendered = ->\n  Session.set('keyForNodeLabel', \"null\")\n\n  if (Session.get 'scripts').length =1\n    scriptObject = (Session.get 'scripts')[0]\n    Session.set 'scriptName', scriptObject.title\n    runScriptAndDrawResults(scriptObject.script)\n  $(\"#scriptSelector\").change ->\n    scriptName = $(\"#scriptSelector\").val()\n    for each in (Session.get 'scripts')\n      if scriptName == each.title\n        scriptCode = each.script\n        Session.set 'scriptName', each.title\n    runScriptAndDrawResults(scriptCode)\n\n\n#*************** utilities\n\nrunScriptAndDrawResults = (scriptCode)->\n  Session.set 'graphFoundInResults', false\n  Session.set 'graphRenderingStatus', ''\n  Session.set 'drawButtonPressed', false\n  Session.set 'scriptCode', scriptCode\n  Session.set 'userID', 'quikvis'\n  Session.set 'tinkerPopVersion', '3'\n  Session.set 'graphFoundInResults', false\n  serverURL = Session.get 'serverURL'\n  graphName = Session.get 'graphName'\n  scriptName = Session.get 'scriptName'\n  userID = Session.get 'userID'\n  Session.set 'graphFoundInResults', false\n  Session.set 'graphRenderingStatus', ''\n  Session.set 'elapsedRenderTime', ''\n  Session.set 'elapsedTime','Timing...'\n  Session.set 'drawButtonPressed', false\n  Session.set 'startTime', moment().toDate()\n  Session.set 'elementsInResults',{vertices:[],edges:[]}\n  if window.resultsEditor\n    window.resultsEditor.set {}\n  if serverURL && graphName && scriptName\n    if window.ScriptEditor != undefined\n      scriptCode = window.ScriptEditor.getValue()\n    else\n      scriptCode = Session.get 'scriptCode'\n    if (Session.get \"usingWebSockets\")\n      window.socketToJanus.onmessage = (msg) ->\n        endTime = Date.now()\n        data = msg.data\n        json = JSON.parse(data)\n        if json.status.code >= 500\n          Session.set 'runStatus', json.status.message\n          alert \"Error in processing Gremlin script: \"+json.status.message\n        else\n          if json.status.code == 204\n            results = []\n          else\n            results = json.result.data\n          processResults(results, true, startTime - endTime)\n      request =\n        requestId: uuid.new(),\n        op:\"eval\",\n        processor:\"\",\n        args:{gremlin: scriptCode, bindings: {}, language: \"gremlin-groovy\"}\n      startTime = Date.now()\n      window.socketToJanus.send(JSON.stringify(request))\n    else\n      Meteor.call \"runScript\", userID, serverURL,(Session.get 'tinkerPopVersion'), (Session.get \"usingWebSockets\"), scriptName,scriptCode,{}, (error, result) ->\n        if error\n          console.log  error\n          alert JSON.stringify error\n          return\n        #console.log 'result=',JSON.stringify result\n        if (result == undefined) || (result.results == undefined) || (result.results == null) || (result.results.length == 0)\n          results = [null]\n        else\n          results = result.results\n        if window.resultsEditor\n          window.resultsEditor.set results\n        Session.set 'scriptResult', results\n        Session.set 'runStatus', result.success\n        d = moment.duration(Math.round(result.queryTime*1000)/1000)\n        Session.set 'queryTime', window.durationToString(d)\n        d = moment.duration(Math.round((moment()-moment(Session.get 'startTime'))*1000)/1000)\n        Session.set 'elapsedTime', window.durationToString(d)\n        determineGraphToShow()\n        Session.set 'drawButtonPressed', true\n        Session.set 'graphRenderingStatus','Rendering...'\n        Session.set 'elapsedRenderTime', 'Timing...'\n        randomizeLayout()\n        renderGraph()\n      return\n  return\n\nmodifyRenderingUsing = ()->\n  setTimeout( ->\n    gts = Session.get 'graphToShow'\n    options = Session.get 'renderingOptions'\n    nodes = gts.nodes\n    edges = gts.edges\n    for option in options\n      if option.type == 'edge'\n        for rendering in option.renderings\n          selectionScript = rendering.selectUsing\n          directives = rendering.directives\n          for directive in directives\n            renderingKey = (Object.keys directive)[0]\n            renderingScript = directive[renderingKey]\n            functionString = 'function selector(edge){return '+selectionScript+'}'\n            eval functionString\n            functionString = 'function renderer(edge){return '+renderingScript+'}'\n            eval functionString\n            for edge in edges\n              if selector(edge.element)\n                edge[renderingKey] = renderer(edge.element)\n              else\n      if option.type == 'vertex'\n        for rendering in option.renderings\n          selectionScript = rendering.selectUsing\n          directives = rendering.directives\n          for directive in directives\n            renderingKey = (Object.keys directive)[0]\n            renderingScript = directive[renderingKey]\n            functionString = 'function selector(vertex){return '+selectionScript+'}'\n            eval functionString\n            functionString = 'function renderer(vertex){return '+renderingScript+'}'\n            eval functionString\n            for node in nodes\n              if selector(node.element)\n                node[renderingKey] = renderer(node.element)\n#alert JSON.stringify(node)\n              else\n#alert 'FAILED',JSON.stringify(node)\n      window.visnetwork.nodesHandler.body.data.nodes.update nodes\n      window.visnetwork.edgesHandler.body.data.edges.update edges\n  ,2000)\n\n#********************* Widgets\n\n\n\n#******************** Buttons\n\n\n#******************** Helpers\n\nTemplate.QuikVisIFrameOnlyMinimal.helpers\n  isAdmin: ->\n    (Session.get 'userID') == (Session.get 'admin-userID')\n  notAdmin: ->\n    (Session.get 'userID') != (Session.get 'admin-userID')\n  userLoggedIn: ->\n    (Session.get 'userID') != null\n\n  scripts: ->\n    Session.get 'scripts'\n  multipleScripts: ->\n    (Session.get 'scripts').length > 1\n\n  script: ->\n    @.title\n  scriptResult: ->\n    true\n  graphSelected: ->\n    true\n  scriptSelected: ->\n    (Session.get 'scriptName') != null\n  drawingGraph: ->\n    true\n  graphToShow: ->\n    (Session.get 'graphFoundInResults')\n  renderingOptions: ->\n    JSON.stringify (Session.get 'renderingOptions')\n\nprocessResults = (results, success, queryTime) ->\n  if window.resultsEditor\n    window.resultsEditor.set results\n  Session.set 'scriptResult', results\n  Session.set 'runStatus', success\n  d = moment.duration(Math.round(queryTime*1000)/1000)\n  Session.set 'queryTime', window.durationToString(d)\n  d = moment.duration(Math.round((moment()-moment(Session.get 'startTime'))*1000)/1000)\n  Session.set 'elapsedTime', window.durationToString(d)\n  determineGraphToShow()\n  if ((Session.get 'graphToShow').nodes.length == 0) && ((Session.get 'graphToShow').edges.length == 0)\n    Session.set 'graphRenderingStatus','No graph in result'\n  else\n    Session.set 'graphRenderingStatus','Ready'\n    if Session.get('drawGraphResult') == true\n      Session.set 'drawButtonPressed', true\n      Session.set 'graphRenderingStatus','Rendering...'\n      Session.set 'elapsedRenderTime', 'Timing...'\n      randomizeLayout()\n      renderGraph()\n  return"
  ]
}