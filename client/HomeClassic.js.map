{
  "version": 3,
  "file": "HomeClassic.js",
  "sourceRoot": "",
  "sources": [
    "HomeClassic.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "Template.HomeClassic.rendered = ->\n  Session.set('useLabelPrefix', true)\n  Session.set('keyForNodeLabel', \"null\")\n\n\n  window.wsConnect = (wsUri)->\n    console.log(\"connecting to \",wsUri)\n    document.getElementById('ws-status').innerHTML = \"<p style='font-size:16px; background-color: yellow; color: black;'>trying Websocket connection...</p>\"\n    window.socketToJanus = new WebSocket(wsUri+\"/gremlin\")\n    window.socketToJanus.onmessage = (msg) ->   #example send method\n      data = msg.data\n      json = JSON.parse(data)\n      window.dispatcher(json)\n    window.socketToJanus.onopen = () ->\n      window.WebsocketReonnectionCounts = 0\n      document.getElementById('ws-status').innerHTML = \"<p style='font-size:16px; background-color: white; color: green;'>connected via Websocket</p>\"\n      console.log(\"connected to\", wsUri)\n      window.WSURL = wsUri\n      window.detectGraphSON3()\n\n    window.socketToJanus.onclose = ()->\n      document.getElementById('ws-status').innerHTML = \"<p style='font-size:16px; background-color: white; color: red;'>not connected</p>\"\n      console.log(\"closed to\", window['WSURL'], ' attempting reconnect')\n      window.WebsocketReonnectionCounts = window.WebsocketReonnectionCounts + 1\n      if window.WebsocketReonnectionCounts > 10\n        document.getElementById('ws-status').innerHTML = \"<p style='font-size:16px; background-color: white; color: red;'>gave up reconnecting</p>\"\n        console.log(\"failed 10 times to connect to\", window['WSURL'], ' giving up')\n      else\n        setTimeout(window.wsConnect(window['WSURL']),3000);  #attempt to reconnect\n\n  Session.set \"usingWebSockets\", true\n  try\n    window.wsConnect(Session.get \"serverURL\");  #connect the websocket\n  catch\n    Session.set \"usingWebSockets\", false\n    document.getElementById('ws-status').innerHTML = \"<p style='font-size:16px; background-color: white; color: black;'>Connected via HTTP</p>\"\n\n#*************** utilities\n\nwindow.detectGraphSON3 = ()->\n  bindings = {}\n  script = '[1]'\n  if (Session.get \"usingWebSockets\")\n    window.socketToJanus.onmessage = (msg) ->\n      endTime = Date.now()\n      data = msg.data\n      json = JSON.parse(data)\n      if json.status.code >= 500\n        alert \"Error in processing Gremlin script: \"+json.status.message\n      else\n        if json.status.code == 204\n          results = []\n        else\n          results = json.result.data\n        window.setFlagForGraphSON3(results)\n    request =\n      requestId: uuid.new(),\n      op:\"eval\",\n      processor:\"\",\n      args:{gremlin: script, bindings: bindings, language: \"gremlin-groovy\"}\n    startTime = Date.now()\n    window.socketToJanus.send(JSON.stringify(request))\n  else\n    Meteor.call 'runScript', Session.get('userID'), Session.get('serverURL'),(Session.get 'tinkerPopVersion'), Session.get('graphName'),'Built-in Vertex Retriever', script, bindings, (error,result)->\n      window.setFlagForGraphSON3(results.results)\n\nwindow.setFlagForGraphSON3 = (results)->\n  if results['@type'] == 'g:List'\n    window.UsingGraphSON3 = true\n  else\n    window.UsingGraphSON3 = false\n  resultsShouldBe =[\n    {\n      \"@type\": \"g:List\",\n      \"@value\": [\n        {\n          \"@type\": \"g:Int32\",\n          \"@value\": 1\n        }\n      ]\n    }\n  ]\n\n#********************* Widgets\nMeteor.Spinner.options =\n  lines: 13 # The number of lines to draw\n  length: 10 # The length of each line\n  width: 5 # The line thickness\n  radius: 15 # The radius of the inner circle\n  corners: 0.7 # Corner roundness (0..1)\n  rotate: 0 # The rotation offset\n  direction: 1 # 1: clockwise, -1: counterclockwise\n  color: '#fff' # #rgb or #rrggbb\n  speed: 1 # Rounds per second\n  trail: 60 # Afterglow percentage\n  shadow: true # Whether to render a shadow\n  hwaccel: false # Whether to use hardware acceleration\n  className: 'spinner' # The CSS class to assign to the spinner\n  zIndex: 2e9 # The z-index (defaults to 2000000000)\n  top: 'auto' # Top position relative to parent in px\n  left: 'auto' # Left position relative to parent in px\n\n\n\n#******************** Buttons\n\n\n#******************** Helpers\n\nTemplate.HomeClassic.helpers\n  isAdmin: ->\n    (Session.get 'userID') == (Session.get 'admin-userID')\n  notAdmin: ->\n    (Session.get 'userID') != (Session.get 'admin-userID')\n  userLoggedIn: ->\n    (Session.get 'userID') != null\n\n  graphSelected: ->\n    (Session.get 'graphName') != null\n  scriptSelected: ->\n    (Session.get 'scriptName') != null\n  scriptResult: ->\n    #(Session.get 'scriptResult')\n    (Session.get 'showJSONResult')\n\n  graphToShow: ->\n    (Session.get 'graphFoundInResults')\n\n  drawingGraph: ->\n    #(Session.get 'drawButtonPressed')\n    (Session.get 'drawGraphResult')"
  ]
}